Bluetooth-профиль устройства для управления электромагнитными реле.

Краткое описание профиля, используемого для обмена информацией между  bluetoth-реле (далее "сервер") и смартфоном (далее "клиент"). Роль сервера соответствует роли "Server" по спецификации Generic Attribute Profile (GATT), а роль клиента соответствует роли  "Client" по спецификации GATT. 

Локальное имя:		"BT-01" (потом будет изменено)
BT-адрес сервера: 		"Public"   "AA-00-00-E1-80-02".

Аутентификационные данные:		
MITM-защита 			включена
Out-Of-Bound аутентификация:	выключена
Минимальный размер ключа:	7 байт
Максимальный размер ключа:	16 байт
Пин клиента фиксированный:	"123456" (потом будет заменен).	

Сервис, добавленный и включенный в сервере соответствует спецификации GATT. Данный сервис предназначен для передачи "случайной строки" от сервера к клиенту и приема авторизационной строки SHA1 хэша и намера включаемого реле от клиента к серверу.
Данные сервиса:
UUID Type: 	128-bit UUID
UUID128:		 d973f2e0-b19e-11e2-9e96-0800200c9a66

Сервис включает в себя 3 характеристики:
1. String_Char - используется для передачи "строки" для формирования Токена.
Данные характеристики:
UUID Type: 	128-bit UUID
UUID128:	 d973f2e1-b19e-11e2-9e96-0800200c9a66
Свойства:	Notify/ Read
Максимальная длина поля  характеристики:	52 байта
Длина поля данных:	20 байта
Handle	0x11
Handle Data	0х12
Handle Notification 	0x13
Состав поля данных:
байт 0
байт 1
байт 2 
. . . 
байт 19
. . .
байт 51
Символ 1 строки 
Символ 2 строки
Символ 3 строки
. . .
Символ 20 строки
N/A
N/A
		
2. Response_Char - используется для передачи отклика в виде уведомления сервером клиента.
Данные характеристики:
UUID Type: 	128-bit UUID
UUID128:	 d973f2e2-b19e-11e2-9e96-0800200c9a66
Свойства:	Notify/ Read
Максимальная длина поля  характеристики:	2 байта
Длина поля данных:	1 байта
Handle	0x11
Handle Data	0х12
Handle Notification 	0x13
Состав поля данных:	0xXX – отклик на команду / состояние
  			   сервера
		
3. Token_Char – предназначен:
      а) для передачи данных для аутентификации клиента - строки, содержащей SHA1-хэш, и для
      б) для передачи номера включаемого реле.
Данные характеристики:
UUID Type: 	128-bit UUID
UUID128:	d973f2e2-b19e-11e2-9e96-0800200c9a66
Свойства:	Write / Write without response / Read
Максимальная длина поля  характеристики:	52 байта
Длина поля данных:	40 байта
Handle	0x11
Handle Data	0х12
Handle Notification 	0x13
Состав поля данных:

байт 0
байт 1
. . . 
байт 39
байт 40
байт 41
. . .
байт 51
SHA1-хэш
Символ 1 строки 
Символ 2 строки
. . .
Символ 40 строки
вкл. реле/
статус реле
№реле / 
N/A
N/A
N/A

Примечание:  SHA1-хэш вычисляется для конкатенированной строки: 

	 "случайная строка"+"аутентификационный UUID", где 
	
	- "случайная строка" — строка, получаемая от сервера. Состоит из 20-и случайных ASCII‑символов. Состав набора: цифры, строчные латинские буквы, прописные латинские буквы [0-9,a-z,A-Z]; 
	- "аутентификационный UUID" – на тестовый период определен: "5aec40b4138f410f9b435c10afceb2f1" (цифры и строчные латинские буквы).

